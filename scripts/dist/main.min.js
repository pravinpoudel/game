"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}var cubePosition=[1,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0],up=[0,1,0],modelDegree=0,cameraYposition=1.5,vs="#version 300 es\n    in vec3 a_position;\n    in float a_textureCordinate;\n    \n    uniform mat4 u_ModelMatrix;\n    uniform mat4 u_wvProjectionMatrix;\n\n    out vec3 vertexCordinate;\n\n    void main(){\n        // gl_Position =  u_wvProjectionMatrix* vec4((2.0*a_position)- vec3(1.0, 1.0, 1.0), 1.0);  \n        gl_Position =  u_wvProjectionMatrix* u_ModelMatrix* vec4(a_position, 1.0);\n        //gl_Position =  u_wvProjectionMatrix* vec4(a_position, 1.0);\n        vertexCordinate = a_position;   \n    }\n",fs="#version 300 es\n\n    #define M_PI 3.1415926535897932384626433832795\n\n    precision mediump float;\n\n    in vec3 vertexCordinate;\n    uniform sampler2D u_sphereText;\n\n    out vec4 outColor;\n\n    void main(){\n     \n        vec3 vertDirection = normalize(vertexCordinate - vec3(0.0, 0.0, 0.0));\n        float u = atan(vertDirection.x, vertDirection.z)/(2.0*M_PI) + 0.5;\n        float v = 0.5-vertDirection.y ;\n    \n        outColor = texture(u_sphereText, vec2(u,v));\n        // outColor = vec4(1.0, 0.8,  0.0, 1.0);\n    }\n\n";!function(){var _=document.querySelector("#main-canvas").getContext("webgl2");if(_){_.getExtension("OES_element_index_uint");var s=webglUtils.createProgramFromSources(_,[vs,fs]),e=_.getAttribLocation(s,"a_position"),v=_.getUniformLocation(s,"u_sphereText"),E=_.getUniformLocation(s,"u_wvProjectionMatrix"),m=_.getUniformLocation(s,"u_ModelMatrix"),T=_.createVertexArray();_.bindVertexArray(T);var A=sphereVertIndices(),r=_.createBuffer();_.bindBuffer(_.ARRAY_BUFFER,r),_.bufferData(_.ARRAY_BUFFER,new Float32Array(_toConsumableArray(A[0])),_.STATIC_DRAW),_.enableVertexAttribArray(e),_.vertexAttribPointer(e,3,_.FLOAT,!1,0,0);var t=_.createTexture();_.activeTexture(_.TEXTURE1),_.bindTexture(_.TEXTURE_2D,t);var n=_.RGBA,o=_.RGBA,a=_.UNSIGNED_BYTE,i=new Uint8Array([0,0,255,255]);_.texImage2D(_.TEXTURE_2D,0,n,1,1,0,o,a,i);var c=new Image;c.crossOrigin="",c.src="http://localhost/game/images/texture/ball.jpg",c.onload=function(){console.log("i am loaded"),_.texImage2D(_.TEXTURE_2D,0,n,o,a,c),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST)};var f=0;requestAnimationFrame(function e(){webglUtils.resizeCanvasToDisplaySize(_.canvas),_.viewport(0,0,_.canvas.width,_.canvas.height),_.clearColor(.5,.5,.5,.5),_.clear(_.COLOR_BUFFER_BIT|_.DEPTH_BUFFER_BIT),_.enable(_.CULL_FACE),_.cullFace(_.BACK),_.enable(_.DEPTH_TEST),_.enable(_.BLEND),_.useProgram(s),_.bindVertexArray(T),_.uniform1i(v,1);var r=R(modelDegree),t=R(f),n=m4.yRotation(r);_.uniformMatrix4fv(m,!1,n);var o=m4.yRotation(t);o=m4.translate(o,0,0,2),cameraPosition=[o[12],o[13],o[14]],o=function(e,r){return m4.lookAt(e,[1,0,0],r)}(cameraPosition,up),viewMatrix=m4.inverse(o);var a=_.canvas.clientWidth/_.canvas.clientHeight,i=R(90),c=m4.perspective(i,a,.01,1e3),l=_.createBuffer();_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,l),_.bufferData(_.ELEMENT_ARRAY_BUFFER,new Uint16Array(_toConsumableArray(A[1])),_.STATIC_DRAW);var u=m4.multiply(c,viewMatrix);_.uniformMatrix4fv(E,!1,u),_.drawElements(_.TRIANGLES,A[1].length,_.UNSIGNED_SHORT,0),window.requestAnimationFrame(e)})}else console.log("webgl2 not found");function R(e){return Math.PI/180*e}}();
//# sourceMappingURL=main.min.js.map
