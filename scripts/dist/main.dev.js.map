{"version":3,"sources":["main.js"],"names":["cubePosition","up","vs","fs","canvas","document","querySelector","gl","getContext","console","log","ext","getExtension","program","webglUtils","createProgramFromSources","positionLocation","getAttribLocation","viewProjectionLocation","getUniformLocation","vao","createVertexArray","bindVertexArray","sphere","sphereVertIndices","positionBufferr","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Uint16Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","degToRadian","deg","Math","PI","radToDegree","rad","initialCameraSetup","cameraPosition","cameraMatrix","m4","lookAt","cameraDegree","drawScene","resizeCanvasToDisplaySize","viewport","width","height","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","enable","CULL_FACE","DEPTH_TEST","BLEND","useProgram","cameraRadian","yRotation","translate","viewMatrix","inverse","aspect","clientWidth","clientHeight","fieldofView","projectionMatrix","perspective","indicesBuffer","ELEMENT_ARRAY_BUFFER","Uint32Array","vProjectionMatrix","multiply","uniformMatrix4fv","drawElements","TRIANGLES","length","UNSIGNED_INT","window","requestAnimationFrame"],"mappings":"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","sourcesContent":["`use strict`;\r\n\r\nconst cubePosition = [\r\n  1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0,\r\n  0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0,\r\n];\r\nconst up = [0, 1, 0];\r\n\r\nconst vs = `#version 300 es\r\n    in vec3 a_position;\r\n    in float a_textureCordinate;\r\n    \r\n    uniform mat4 u_wvProjectionMatrix;\r\n\r\n    out vec4 fragmentColor;\r\n\r\n    void main(){\r\n        // gl_Position =  u_wvProjectionMatrix* vec4((2.0*a_position)- vec3(1.0, 1.0, 1.0), 1.0);\r\n        gl_Position =  u_wvProjectionMatrix* vec4(a_position, 1.0);\r\n \r\n        fragmentColor = gl_Position;   \r\n    }\r\n`;\r\n\r\nconst fs = `#version 300 es\r\n        precision highp float;\r\n\r\n        in vec4 fragmentColor;\r\n\r\n        out vec4 outColor;\r\n\r\n        void main(){\r\n            // outColor = fragmentColor;\r\n            outColor = vec4(1.0, 0.0, 0.5, 1.0);\r\n        }\r\n\r\n`;\r\n\r\n(function () {\r\n  const canvas = document.querySelector(\"#main-canvas\");\r\n  let gl = canvas.getContext(\"webgl2\");\r\n  if (!gl) {\r\n    console.log(\"webgl2 not found\");\r\n    return;\r\n  }\r\n\r\n  var ext = gl.getExtension(\"OES_element_index_uint\");\r\n\r\n  let program = webglUtils.createProgramFromSources(gl, [vs, fs]);\r\n  let positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n  let viewProjectionLocation = gl.getUniformLocation(\r\n    program,\r\n    \"u_wvProjectionMatrix\"\r\n  );\r\n\r\n  let vao = gl.createVertexArray();\r\n  gl.bindVertexArray(vao);\r\n\r\n  const sphere = sphereVertIndices();\r\n\r\n  let positionBufferr = gl.createBuffer();\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBufferr);\r\n  gl.bufferData(\r\n    gl.ARRAY_BUFFER,\r\n    new Uint16Array([...sphere[0]]),\r\n    gl.STATIC_DRAW\r\n  );\r\n  gl.enableVertexAttribArray(positionLocation);\r\n  gl.vertexAttribPointer(positionLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n  // let ballTexture = gl.createTexture();\r\n  // gl.bindTexture(gl.TEXTURE_2D, ballTexture);\r\n  // gl.textImage2D(gl.TEXTURE_2D, 0, gl.RGBA);\r\n  // put color as a texture at first\r\n  // load an image as a texture\r\n\r\n  // revolve an object around x axis\r\n\r\n  function degToRadian(deg) {\r\n    return (Math.PI / 180) * deg;\r\n  }\r\n\r\n  function radToDegree(rad) {\r\n    return (180 / Math.PI) * rad;\r\n  }\r\n\r\n  function initialCameraSetup(cameraPosition, up) {\r\n    let cameraMatrix = m4.lookAt(cameraPosition, [1, 0, 0], up);\r\n    return cameraMatrix;\r\n  }\r\n\r\n  let cameraDegree = 0;\r\n\r\n  function drawScene() {\r\n    webglUtils.resizeCanvasToDisplaySize(gl.canvas);\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n\r\n    gl.clearColor(0.5, 0.5, 0.5, 0.5);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.enable(gl.BLEND);\r\n\r\n    gl.useProgram(program);\r\n    gl.bindVertexArray(vao);\r\n    cameraDegree += 0.4;\r\n    let cameraRadian = degToRadian(cameraDegree);\r\n    let cameraMatrix = m4.yRotation(cameraRadian);\r\n    cameraMatrix = m4.translate(cameraMatrix, 0.0, 0.0, 1.5);\r\n\r\n    cameraPosition = [cameraMatrix[12], cameraMatrix[13], cameraMatrix[14]];\r\n    // cameraPosition = [0.5, 2.0, 1.5];\r\n    cameraMatrix = initialCameraSetup(cameraPosition, up);\r\n    viewMatrix = m4.inverse(cameraMatrix);\r\n\r\n    let aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    let fieldofView = degToRadian(60);\r\n    let projectionMatrix = m4.perspective(fieldofView, aspect, 0.01, 1000);\r\n\r\n    let indicesBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indicesBuffer);\r\n    gl.bufferData(\r\n      gl.ELEMENT_ARRAY_BUFFER,\r\n      new Uint32Array([...sphere[1]]),\r\n      gl.STATIC_DRAW\r\n    );\r\n\r\n    let vProjectionMatrix = m4.multiply(projectionMatrix, viewMatrix);\r\n    gl.uniformMatrix4fv(viewProjectionLocation, false, vProjectionMatrix);\r\n    gl.drawElements(gl.TRIANGLES, sphere[1].length, gl.UNSIGNED_INT, 0);\r\n    window.requestAnimationFrame(drawScene);\r\n  }\r\n\r\n  requestAnimationFrame(drawScene);\r\n})();\r\n"],"file":"main.dev.js"}