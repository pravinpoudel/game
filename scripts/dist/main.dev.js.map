{"version":3,"sources":["main.js"],"names":["cubePosition","up","vs","fs","canvas","document","querySelector","gl","getContext","console","log","ext","getExtension","program","webglUtils","createProgramFromSources","positionLocation","getAttribLocation","sphereTextLocation","getUniformLocation","viewProjectionLocation","modelMatrixLocation","vao","createVertexArray","bindVertexArray","sphere","sphereVertIndices","positionBufferr","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","ballTexture","createTexture","activeTexture","TEXTURE1","bindTexture","TEXTURE_2D","level","internallFormat","RGBA","width","height","border","srcFormat","srcType","UNSIGNED_BYTE","pixel","Uint8Array","texImage2D","ballImage","Image","crossOrigin","src","onload","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","degToRadian","deg","Math","PI","radToDegree","rad","initialCameraSetup","cameraPosition","cameraMatrix","m4","lookAt","cameraDegree","modelDegree","drawScene","resizeCanvasToDisplaySize","viewport","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","enable","CULL_FACE","DEPTH_TEST","BLEND","useProgram","uniform1i","modelRadian","cameraRadian","modelMatrix","yRotation","uniformMatrix4fv","translate","viewMatrix","inverse","aspect","clientWidth","clientHeight","fieldofView","projectionMatrix","perspective","indicesBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","vProjectionMatrix","multiply","drawElements","TRIANGLES","length","UNSIGNED_SHORT","window","requestAnimationFrame"],"mappings":"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","sourcesContent":["`use strict`;\r\n\r\nconst cubePosition = [\r\n  1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0,\r\n  0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0,\r\n];\r\nconst up = [0, 1, 0];\r\n\r\nconst vs = `#version 300 es\r\n    in vec3 a_position;\r\n    in float a_textureCordinate;\r\n    \r\n    uniform mat4 u_ModelMatrix;\r\n    uniform mat4 u_wvProjectionMatrix;\r\n\r\n    out vec3 vertexCordinate;\r\n\r\n    void main(){\r\n        // gl_Position =  u_wvProjectionMatrix* vec4((2.0*a_position)- vec3(1.0, 1.0, 1.0), 1.0);\r\n        gl_Position =  u_wvProjectionMatrix* u_ModelMatrix* vec4(a_position, 1.0);\r\n        // gl_Position =  u_wvProjectionMatrix* vec4(a_position, 1.0);\r\n \r\n        vertexCordinate = a_position;   \r\n    }\r\n`;\r\n\r\nconst fs = `#version 300 es\r\n\r\n    #define M_PI 3.1415926535897932384626433832795\r\n\r\n    precision mediump float;\r\n\r\n    in vec3 vertexCordinate;\r\n    uniform sampler2D u_sphereText;\r\n\r\n    out vec4 outColor;\r\n\r\n    void main(){\r\n     \r\n        //  generation of UV cordinate\r\n        vec3 vertDirection = normalize(vertexCordinate - vec3(0.0, 0.0, 0.0));\r\n        float u = atan(vertDirection.x, vertDirection.z)/(2.0*M_PI) + 0.5;\r\n        float v = 0.5-vertDirection.y ;\r\n    \r\n        outColor = texture(u_sphereText, vec2(u,v));\r\n        // outColor = vec4(1.0, 0.8,  0.0, 1.0);\r\n    }\r\n\r\n`;\r\n\r\n(function () {\r\n  const canvas = document.querySelector(\"#main-canvas\");\r\n  let gl = canvas.getContext(\"webgl2\");\r\n  if (!gl) {\r\n    console.log(\"webgl2 not found\");\r\n    return;\r\n  }\r\n  var ext = gl.getExtension(\"OES_element_index_uint\");\r\n\r\n  let program = webglUtils.createProgramFromSources(gl, [vs, fs]);\r\n  let positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n  let sphereTextLocation = gl.getUniformLocation(program, \"u_sphereText\");\r\n  let viewProjectionLocation = gl.getUniformLocation(\r\n    program,\r\n    \"u_wvProjectionMatrix\"\r\n  );\r\n  let modelMatrixLocation = gl.getUniformLocation(program, \"u_ModelMatrix\");\r\n\r\n  let vao = gl.createVertexArray();\r\n  gl.bindVertexArray(vao);\r\n\r\n  const sphere = sphereVertIndices();\r\n\r\n  let positionBufferr = gl.createBuffer();\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBufferr);\r\n  gl.bufferData(\r\n    gl.ARRAY_BUFFER,\r\n    new Float32Array([...sphere[0]]),\r\n    gl.STATIC_DRAW\r\n  );\r\n\r\n  gl.enableVertexAttribArray(positionLocation);\r\n  gl.vertexAttribPointer(positionLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n  let ballTexture = gl.createTexture();\r\n  gl.activeTexture(gl.TEXTURE1);\r\n  gl.bindTexture(gl.TEXTURE_2D, ballTexture);\r\n\r\n  const level = 0;\r\n  const internallFormat = gl.RGBA;\r\n  const width = 1;\r\n  const height = 1;\r\n  const border = 0;\r\n  const srcFormat = gl.RGBA;\r\n  const srcType = gl.UNSIGNED_BYTE;\r\n  const pixel = new Uint8Array([0, 0, 255, 255]);\r\n  gl.texImage2D(\r\n    gl.TEXTURE_2D,\r\n    level,\r\n    internallFormat,\r\n    width,\r\n    height,\r\n    border,\r\n    srcFormat,\r\n    srcType,\r\n    pixel\r\n  );\r\n\r\n  let ballImage = new Image();\r\n  ballImage.crossOrigin = \"\";\r\n  ballImage.src = \"http://localhost/game/images/texture/ball.jpg\";\r\n\r\n  ballImage.onload = function () {\r\n    console.log(\"i am loaded\");\r\n    gl.texImage2D(\r\n      gl.TEXTURE_2D,\r\n      level,\r\n      internallFormat,\r\n      srcFormat,\r\n      srcType,\r\n      ballImage\r\n    );\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n  };\r\n\r\n  function degToRadian(deg) {\r\n    return (Math.PI / 180) * deg;\r\n  }\r\n\r\n  function radToDegree(rad) {\r\n    return (180 / Math.PI) * rad;\r\n  }\r\n\r\n  function initialCameraSetup(cameraPosition, up) {\r\n    let cameraMatrix = m4.lookAt(cameraPosition, [1, 0, 0], up);\r\n    return cameraMatrix;\r\n  }\r\n\r\n  let cameraDegree = 0;\r\n  let modelDegree = 0;\r\n\r\n  function drawScene() {\r\n    webglUtils.resizeCanvasToDisplaySize(gl.canvas);\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n\r\n    gl.clearColor(0.5, 0.5, 0.5, 0.5);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.enable(gl.BLEND);\r\n\r\n    gl.useProgram(program);\r\n    gl.bindVertexArray(vao);\r\n    gl.uniform1i(sphereTextLocation, 1);\r\n\r\n    // cameraDegree += 0.4;\r\n    modelDegree += 1.0;\r\n    let modelRadian = degToRadian(modelDegree);\r\n    let cameraRadian = degToRadian(cameraDegree);\r\n\r\n    // -------------------------------------------------------------------\r\n    let modelMatrix = m4.yRotation(modelRadian);\r\n    gl.uniformMatrix4fv(modelMatrixLocation, false, modelMatrix);\r\n    // --------------------------------------------------------------------\r\n\r\n    let cameraMatrix = m4.yRotation(cameraRadian);\r\n\r\n    cameraMatrix = m4.translate(cameraMatrix, 0.0, 0.0, 1.5);\r\n\r\n    cameraPosition = [cameraMatrix[12], cameraMatrix[13], cameraMatrix[14]];\r\n    // cameraPosition = [0.0, 1.0, 1.5];\r\n    cameraMatrix = initialCameraSetup(cameraPosition, up);\r\n    viewMatrix = m4.inverse(cameraMatrix);\r\n\r\n    let aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    let fieldofView = degToRadian(90);\r\n    let projectionMatrix = m4.perspective(fieldofView, aspect, 0.01, 1000);\r\n\r\n    let indicesBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indicesBuffer);\r\n    gl.bufferData(\r\n      gl.ELEMENT_ARRAY_BUFFER,\r\n      new Uint16Array([...sphere[1]]),\r\n      gl.STATIC_DRAW\r\n    );\r\n\r\n    let vProjectionMatrix = m4.multiply(projectionMatrix, viewMatrix);\r\n    gl.uniformMatrix4fv(viewProjectionLocation, false, vProjectionMatrix);\r\n    gl.drawElements(gl.TRIANGLES, sphere[1].length, gl.UNSIGNED_SHORT, 0);\r\n    window.requestAnimationFrame(drawScene);\r\n  }\r\n\r\n  requestAnimationFrame(drawScene);\r\n})();\r\n"],"file":"main.dev.js"}