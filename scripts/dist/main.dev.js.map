{"version":3,"sources":["main.js"],"names":["cubePosition","up","vs","fs","canvas","document","querySelector","gl","getContext","console","log","program","webglUtils","createProgramFromSources","positionLocation","getAttribLocation","viewProjectionLocation","getUniformLocation","vao","createVertexArray","bindVertexArray","positionBufferr","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","degToRadian","deg","Math","PI","radToDegree","rad","initialCameraSetup","cameraPosition","cameraMatrix","m4","lookAt","cameraDegree","drawScene","resizeCanvasToDisplaySize","viewport","width","height","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","enable","CULL_FACE","DEPTH_TEST","BLEND","useProgram","cameraRadian","yRotation","translate","viewMatrix","inverse","aspect","clientWidth","clientHeight","fieldofView","projectionMatrix","perspective","vProjectionMatrix","multiply","uniformMatrix4fv","drawArrays","TRIANGLE_STRIP","length","setInterval"],"mappings":"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","sourcesContent":["`use strict`;\r\n\r\nconst cubePosition = [\r\n  1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0,\r\n  0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0,\r\n];\r\nconst up = [0, 1, 0];\r\n\r\nconst vs = `#version 300 es\r\n    in vec3 a_position;\r\n    in float a_textureCordinate;\r\n    \r\n    uniform mat4 u_wvProjectionMatrix;\r\n\r\n    out vec4 fragmentColor;\r\n\r\n    void main(){\r\n        gl_Position =  u_wvProjectionMatrix* vec4((2.0*a_position)- vec3(1.0, 1.0, 1.0), 1.0);\r\n        fragmentColor = gl_Position;   \r\n    }\r\n`;\r\n\r\nconst fs = `#version 300 es\r\n        precision highp float;\r\n\r\n        in vec4 fragmentColor;\r\n\r\n        out vec4 outColor;\r\n\r\n        void main(){\r\n            outColor = fragmentColor;\r\n        }\r\n\r\n`;\r\n\r\n(function () {\r\n  const canvas = document.querySelector(\"#main-canvas\");\r\n  let gl = canvas.getContext(\"webgl2\");\r\n  if (!gl) {\r\n    console.log(\"webgl2 not found\");\r\n    return;\r\n  }\r\n\r\n  let program = webglUtils.createProgramFromSources(gl, [vs, fs]);\r\n  let positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n  let viewProjectionLocation = gl.getUniformLocation(\r\n    program,\r\n    \"u_wvProjectionMatrix\"\r\n  );\r\n\r\n  let vao = gl.createVertexArray();\r\n  gl.bindVertexArray(vao);\r\n\r\n  let positionBufferr = gl.createBuffer();\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBufferr);\r\n  gl.bufferData(\r\n    gl.ARRAY_BUFFER,\r\n    new Float32Array(cubePosition),\r\n    gl.STATIC_DRAW\r\n  );\r\n  gl.enableVertexAttribArray(positionLocation);\r\n  gl.vertexAttribPointer(positionLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n  function degToRadian(deg) {\r\n    return (Math.PI / 180) * deg;\r\n  }\r\n\r\n  function radToDegree(rad) {\r\n    return (180 / Math.PI) * rad;\r\n  }\r\n\r\n  function initialCameraSetup(cameraPosition, up) {\r\n    let cameraMatrix = m4.lookAt(cameraPosition, [1, 0, 0], up);\r\n    return cameraMatrix;\r\n  }\r\n\r\n  let cameraDegree = 0;\r\n\r\n  function drawScene() {\r\n    webglUtils.resizeCanvasToDisplaySize(gl.canvas);\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n\r\n    gl.clearColor(0.5, 0.5, 0.5, 0.5);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.enable(gl.BLEND);\r\n\r\n    gl.useProgram(program);\r\n    gl.bindVertexArray(vao);\r\n\r\n    let cameraRadian = degToRadian(cameraDegree);\r\n    let cameraMatrix = m4.yRotation(cameraRadian);\r\n    cameraMatrix = m4.translate(cameraMatrix, 0.0, 0.0, 1.5);\r\n\r\n    cameraPosition = [cameraMatrix[12], cameraMatrix[13], cameraMatrix[14]];\r\n    // cameraPosition = [0.5, 2.0, 1.5];\r\n    cameraMatrix = initialCameraSetup(cameraPosition, up);\r\n    viewMatrix = m4.inverse(cameraMatrix);\r\n\r\n    let aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    let fieldofView = degToRadian(60);\r\n    let projectionMatrix = m4.perspective(fieldofView, aspect, 0.01, 1000);\r\n\r\n    let vProjectionMatrix = m4.multiply(projectionMatrix, viewMatrix);\r\n    gl.uniformMatrix4fv(viewProjectionLocation, false, vProjectionMatrix);\r\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, cubePosition.length / 3);\r\n  }\r\n\r\n  setInterval(() => {\r\n    cameraDegree++;\r\n    drawScene();\r\n  }, 200);\r\n\r\n  drawScene();\r\n})();\r\n"],"file":"main.dev.js"}