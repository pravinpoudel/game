{"version":3,"sources":["index.js"],"names":["draw","webglUtils","resizeCanvasToDisplaySize","gl","canvas","viewport","width","height","clear","DEPTH_BUFFER_BIT","COLOR_BUFFER_BIT","enable","DEPTH_TEST","CULL_FACE","clearColor","modelAngle","modelMatrix","m4","yRotation","cameraAngle","uniformMatrix4fv","modelMatrixLocation","aspect","clientWidth","clientHeight","fov","Math","PI","projectionMatrix","perspective","uniform1f","scaleLocation","vProjectionMatrix","multiply","viewMatrix","viewProjectionLocation","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","geometries","forEach","geometry","localPosition","attributes","position","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","positionLocation","vertexAttribPointer","FLOAT","drawArrays","TRIANGLES","length","window","requestAnimationFrame","document","getElementById","getContext","console","log","program","createProgramFromSources","loader_VS","loader_FS","useProgram","getAttribLocation","getUniformLocation","objLoader","minMax","minValue","min","maxValue","max","range","subtractVectors","maxSideLength","offSet","scaleVector","addVectors","vao","createVertexArray","bindVertexArray","distanceScale","cameraMatrix","translate","cameraPosition","lookAt","inverse"],"mappings":"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","sourcesContent":["(async function () {\r\n  const canvas = document.getElementById(\"main-canvas\");\r\n  let gl = canvas.getContext(\"webgl2\");\r\n  if (!gl) {\r\n    console.log(\"context couldnot be generated\");\r\n    return;\r\n  }\r\n\r\n  let program = webglUtils.createProgramFromSources(gl, [loader_VS, loader_FS]);\r\n  gl.useProgram(program);\r\n\r\n  let positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n  let modelMatrixLocation = gl.getUniformLocation(program, \"u_modelMatrix\");\r\n  let viewProjectionLocation = gl.getUniformLocation(program, \"u_vpMatrix\");\r\n  let scaleLocation = gl.getUniformLocation(program, \"u_scale\");\r\n\r\n  // find the range and extend of an object to calculate the offset to properly view the object\r\n\r\n  let { geometries, minMax } = await objLoader();\r\n  let { min: minValue, max: maxValue } = minMax;\r\n  const range = m4.subtractVectors(maxValue, minValue);\r\n  const maxSideLength = m4.length(range);\r\n  console.log(maxSideLength);\r\n  const offSet = m4.scaleVector(\r\n    m4.addVectors(minValue, m4.scaleVector(range, 0.5)),\r\n    -1.0\r\n  );\r\n\r\n  // -----------------------------------------------\r\n\r\n  let vao = gl.createVertexArray();\r\n  gl.bindVertexArray(vao);\r\n  let cameraAngle = 0.0;\r\n  let modelAngle = 0.0;\r\n  let distanceScale = 1.3;\r\n\r\n  let cameraMatrix = m4.yRotation(cameraAngle);\r\n  cameraMatrix = m4.translate(\r\n    cameraMatrix,\r\n    0.0,\r\n    0.0,\r\n    maxSideLength * distanceScale\r\n  );\r\n  cameraPosition = [cameraMatrix[12], cameraMatrix[13], cameraMatrix[14]];\r\n  cameraMatrix = m4.lookAt(cameraPosition, [0.0, 0.0, 0.0], [0.0, 1.0, 0.0]);\r\n  viewMatrix = m4.inverse(cameraMatrix);\r\n\r\n  function draw() {\r\n    webglUtils.resizeCanvasToDisplaySize(gl.canvas);\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n\r\n    gl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.clearColor(0.5, 0.5, 0.5, 0.5);\r\n\r\n    modelAngle += 0.1;\r\n\r\n    let modelMatrix = m4.yRotation(cameraAngle);\r\n    gl.uniformMatrix4fv(modelMatrixLocation, false, modelMatrix);\r\n\r\n    let aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    let fov = (Math.PI / 180) * 60;\r\n    let projectionMatrix = m4.perspective(fov, aspect, 0.1, 1000);\r\n\r\n    gl.uniform1f(scaleLocation, 0.5);\r\n\r\n    let vProjectionMatrix = m4.multiply(projectionMatrix, viewMatrix);\r\n    gl.uniformMatrix4fv(viewProjectionLocation, false, vProjectionMatrix);\r\n\r\n    let positionBuffer = gl.createBuffer();\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n    geometries.forEach((geometry) => {\r\n      let localPosition = geometry.attributes.position;\r\n      gl.bufferData(\r\n        gl.ARRAY_BUFFER,\r\n        new Float32Array([...localPosition]),\r\n        gl.STATIC_DRAW\r\n      );\r\n\r\n      gl.enableVertexAttribArray(positionLocation);\r\n      gl.vertexAttribPointer(positionLocation, 3, gl.FLOAT, false, 0, 0);\r\n      gl.drawArrays(gl.TRIANGLES, 0, localPosition.length / 3);\r\n      window.requestAnimationFrame(draw);\r\n    });\r\n  }\r\n  window.requestAnimationFrame(draw);\r\n})();\r\n"],"file":"index.dev.js"}